{% extends 'base.html' %} 
{% block head %}
<title>Post</title>
{% endblock %} 
{% block body %}
<br>
{%with messages = get_flashed_messages(with_categories=True)%}
{%if messages%}
  {%for category, message in messages%}
    <div class="alert alert-{{category}}">
      {{message}}
    </div>
  {%endfor%}
{%endif%}
{%endwith%}
<div>
  <h1 style="display: inline">All Posts</h1>
  <a style="display: inline" class="btn btn-success float-right" href="/posts/new">+New post</a>
</div>
  <hr>
  {% for post in posts%}
    <h2>{{post.title}}</h2>
    {% if post.author%}
      <small style="font-weight: bold;">Written by : {{post.author}} on {{post.date_posted}}</small>
    {% else %}
      <small style="font-weight: bold;">Written by : Anonymous on {{post.date_posted}}</small>
    {% endif %}
    <br>
    <p style="white-space:pre-wrap">{{post.content}}</p>
    <br>
    <a class="btn btn-danger" href="/posts/delete/{{post.id}}">Delete</a>
    <a class="btn btn-primary" href="/posts/edit/{{post.id}}">Edit</a>
    <br>
    <hr>
    <br>
  {% endfor %}
{% endblock %}
